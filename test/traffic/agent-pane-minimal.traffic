(
 ((:direction . outgoing)
  (:kind . request)
  (:object . ((jsonrpc . "2.0")
             (method . "initialize")
             (id . 1)
             (params . ((protocolVersion . 1)
                        (clientCapabilities . ((fs . ((readTextFile . :false)
                                                     (writeTextFile . :false))))))))))
 ((:direction . incoming)
  (:kind . response)
  (:object . ((jsonrpc . "2.0")
             (id . 1)
             (result . ((protocolVersion . 1)
                        (agentCapabilities . ((promptCapabilities . ((embeddedContext . :false)
                                                                    (image . :false))))))))))

 ((:direction . outgoing)
  (:kind . request)
  (:object . ((jsonrpc . "2.0")
             (method . "authenticate")
             (id . 2)
             (params . ((methodId . "chatgpt"))))))
 ((:direction . incoming)
  (:kind . response)
  (:object . ((jsonrpc . "2.0")
             (id . 2)
             (result . ((ok . t))))))

 ((:direction . outgoing)
  (:kind . request)
  (:object . ((jsonrpc . "2.0")
             (method . "session/new")
             (id . 3)
             (params . ((cwd . "/tmp")
                        (mcpServers . []))))))
 ((:direction . incoming)
  (:kind . response)
  (:object . ((jsonrpc . "2.0")
             (id . 3)
             (result . ((sessionId . "fake-session-1"))))))

 ((:direction . outgoing)
  (:kind . request)
  (:object . ((jsonrpc . "2.0")
             (method . "session/set_mode")
             (id . 4)
             (params . ((sessionId . "fake-session-1")
                        (modeId . "bypassPermissions"))))))
 ((:direction . incoming)
  (:kind . response)
  (:object . ((jsonrpc . "2.0")
             (id . 4)
             (result . ((ok . t))))))

 ((:direction . outgoing)
  (:kind . request)
  (:object . ((jsonrpc . "2.0")
             (method . "session/prompt")
             (id . 5)
             (params . ((sessionId . "fake-session-1")
                        (prompt . [((type . "text") (text . "hi"))]))))))

 ;; Simulate streaming agent output.
 ((:direction . incoming)
  (:kind . notification)
  (:object . ((jsonrpc . "2.0")
             (method . "session/update")
             (params . ((update . ((sessionUpdate . "agent_message_chunk")
                                   (content . ((text . "Hello"))))))))))
 ((:direction . incoming)
  (:kind . notification)
  (:object . ((jsonrpc . "2.0")
             (method . "session/update")
             (params . ((update . ((sessionUpdate . "agent_message_chunk")
                                   (content . ((text . ", world.")))))))))))

 ((:direction . incoming)
  (:kind . response)
  (:object . ((jsonrpc . "2.0")
             (id . 5)
             (result . ((stopReason . "end_turn"))))))
)
